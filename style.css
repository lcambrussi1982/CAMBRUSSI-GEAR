/* =========================
   Cambrussi Gear — GLASS RADICAL (HUD no topo, botões fora da pista)
   ========================= */
:root{
  --ink:#eaf2ff;
  --accent:#ff375f;
  --bgA:#0a0f24;
  --bgB:#060913;

  --glassA:rgba(255,255,255,0.18);
  --glassB:rgba(255,255,255,0.08);
  --glassBorder:rgba(255,255,255,0.28);
  --glassShadow:0 10px 34px rgba(0,0,0,0.45);
  --fontGame:'Press Start 2P', system-ui, sans-serif;

  /* controles (pensados p/ ficarem no “gramado” ~13vw de cada lado) */
  --btnSize:clamp(74px, 15vw, 122px);   /* setas */
  --accSize:clamp(92px, 19vw, 160px);   /* acelerar */
  --btnGap:clamp(10px, 2.5vw, 18px);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(140% 120% at 20% 10%, #13204a 0%, transparent 50%),
    radial-gradient(140% 140% at 80% 80%, #1c2f6a 0%, transparent 52%),
    linear-gradient(var(--bgA),var(--bgB));
  color:var(--ink);
  font:500 14px/1.4 system-ui, Segoe UI, Roboto, Ubuntu, Arial;

  /* mobile safe */
  touch-action:none;
  overscroll-behavior:none;
  -webkit-user-select:none; user-select:none;
}

/* ===== Canvas ===== */
canvas{
  display:block;
  width:100svw; height:100svh;
  image-rendering:pixelated; image-rendering:crisp-edges;
  z-index:1;           /* base */
  position:relative;
}

/* ===== HUD (AGORA NO TOPO, tipo barra glass) ===== */
.hud{
  position:fixed;
  top:0; left:0; right:0; bottom:auto;
  display:flex; gap:.5rem; justify-content:center; align-items:center;
  padding:calc(.55rem + env(safe-area-inset-top)) .6rem .55rem;
  z-index:12;          /* acima dos controles */
  pointer-events:none;
  background:linear-gradient(135deg, rgba(6,10,18,.35), rgba(6,10,18,.05));
  backdrop-filter:saturate(150%) blur(12px);
  -webkit-backdrop-filter:saturate(150%) blur(12px);
  border-bottom:1px solid rgba(255,255,255,.18);
  box-shadow:0 10px 34px rgba(0,0,0,.35);
}
.hud .tag{
  font-family:var(--fontGame);
  font-size:11px; letter-spacing:.5px;
  background:linear-gradient(135deg,var(--glassA),var(--glassB));
  border:1px solid var(--glassBorder);
  border-radius:12px;
  padding:.35rem .6rem;
  box-shadow:var(--glassShadow);
}

/* ===== Overlays (glass) ===== */
.overlay{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(6,10,18,0.55); z-index:20 }
.overlay.hidden{ display:none }
.panel{
  width:min(520px, 92vw);
  background:linear-gradient(135deg,var(--glassA),var(--glassB));
  border:1px solid var(--glassBorder);
  border-radius:16px; padding:20px; color:#f4f7ff;
  box-shadow:var(--glassShadow);
  backdrop-filter:saturate(160%) blur(16px);
  -webkit-backdrop-filter:saturate(160%) blur(16px);
}
.panel h1{
  font-family:var(--fontGame);
  font-size:clamp(18px,7vw,28px);
  margin:0 0 10px; color:var(--accent); text-align:center;
  text-shadow:0 2px 0 #0008, 0 0 18px #ff375f66;
}
.panel .brand{ text-align:center; opacity:.85; margin-top:-4px; margin-bottom:12px }
.panel .opts{ display:grid; gap:10px; margin-top:10px }
.panel .opts button{
  font-family:var(--fontGame); font-size:12px; padding:12px; border-radius:12px;
  background:linear-gradient(135deg,rgba(255,255,255,.16),rgba(255,255,255,.08));
  border:1px solid rgba(255,255,255,.28); color:#fff; cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  box-shadow:var(--glassShadow);
  backdrop-filter:saturate(150%) blur(10px);
}
.panel .opts input{
  font-family:var(--fontGame); font-size:12px; padding:10px; border-radius:12px;
  background:linear-gradient(135deg,rgba(255,255,255,.12),rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.26); color:#fff;
  box-shadow:var(--glassShadow);
  backdrop-filter:saturate(150%) blur(10px);
}
.panel.small{ width:min(420px, 92vw) }

/* ===== Splash ===== */
.splash{
  position:fixed; inset:0;
  display:grid; place-items:center;
  background:
    radial-gradient(120% 120% at 50% 50%, rgba(16,26,58,.6) 0%, rgba(7,11,24,.8) 70%),
    linear-gradient(var(--bgA),var(--bgB));
  z-index:30;
}
.spinWrap{perspective:1000px; display:grid; gap:10px; place-items:center}
.spinTxt{
  font:900 clamp(18px,8vw,48px)/1 var(--fontGame);
  color:var(--accent);
  text-transform:uppercase;
  text-shadow:0 2px 0 #000a, 0 0 20px #ff375f72;
  transform-style:preserve-3d;
  animation:spin2 1.8s ease-in-out 1 both; /* 2 giros e pára */
}
.spinTxt.hold{ animation:none }
.spinTxt.fadeText{ animation:textfade .7s ease forwards }
.hint{font-family:var(--fontGame);font-size:10px;opacity:.8}
@keyframes spin2{ 0%{transform:rotateY(0)} 100%{transform:rotateY(720deg)} }
@keyframes textfade{ to{ opacity:0; transform:translateY(-6px) } }
.splash.fade{animation:fadeout .7s ease forwards}
@keyframes fadeout{to{opacity:0;visibility:hidden}}
@media (prefers-reduced-motion: reduce){ .spinTxt{ animation:none } }

/* ===== CONTROLES — CIRCULARES, NOS GUTTERS (fora da pista) =====
   Esq.: [←] embaixo e [→] acima (empilhados) — Dir.: [ACELERAR] grande
   Posicionamos por vw, respeitando ~13vw de grama que a pista não ocupa. */
.controls{
  position:fixed; inset:0; z-index:6;
  pointer-events:none;
  padding:
    max(12px, env(safe-area-inset-top))
    max(10px, env(safe-area-inset-right))
    max(14px, env(safe-area-inset-bottom))
    max(10px, env(safe-area-inset-left));
}

/* Botão circular glass */
.controls .btn{
  position:absolute;
  pointer-events:auto;
  width:var(--btnSize); height:var(--btnSize);
  border-radius:9999px;
  border:1px solid var(--glassBorder);
  background:linear-gradient(135deg,var(--glassA),var(--glassB));
  box-shadow:var(--glassShadow), inset 0 1px 0 rgba(255,255,255,.25);
  backdrop-filter:saturate(180%) blur(14px);
  -webkit-backdrop-filter:saturate(180%) blur(14px);
  -webkit-tap-highlight-color: transparent;
  touch-action:manipulation;
  transition:transform .02s ease, opacity .12s ease, box-shadow .12s ease;
  opacity:.98;
}
.controls .btn:active{ transform:scale(.98); opacity:1 }
.controls .btn::before{ content:""; display:block; margin:auto }

/* Direita: Acelerar — grande, bem na borda direita (gramado) */
.controls .accel{
  right: calc(2vw + env(safe-area-inset-right));
  bottom: calc(2.2vh + env(safe-area-inset-bottom));
  width:var(--accSize); height:var(--accSize);
}
.controls .accel::before{
  width:58%; height:14%;
  background:linear-gradient(180deg, #d8ffe1, #a6f7be);
  border-radius:9999px; margin-top:38%;
  box-shadow:0 0 16px rgba(166,247,190,.65), inset 0 0 3px #fff;
}

/* Esquerda: setas empilhadas no canto esquerdo (gramado) */
.controls .left{
  left: calc(2vw + env(safe-area-inset-left));
  bottom: calc(2.2vh + env(safe-area-inset-bottom));
}
.controls .right{
  left: calc(2vw + env(safe-area-inset-left));
  bottom: calc(2.2vh + env(safe-area-inset-bottom) + var(--btnSize) + var(--btnGap));
}

/* Triângulos das setas */
.controls .left::before{
  width:0; height:0; margin-top:calc(50% - 18px);
  border-style:solid; border-width:22px 30px 22px 0;
  border-color:transparent #cfe7ff transparent transparent;
  filter:drop-shadow(0 0 8px rgba(207,231,255,.5));
}
.controls .right::before{
  width:0; height:0; margin-top:calc(50% - 18px);
  border-style:solid; border-width:22px 0 22px 30px;
  border-color:transparent transparent transparent #cfe7ff;
  filter:drop-shadow(0 0 8px rgba(207,231,255,.5));
}

/* Paisagem: tudo um pouco menor e mais para os cantos */
@media (orientation:landscape){
  :root{
    --btnSize:clamp(66px, 12vw, 100px);
    --accSize:clamp(78px, 14vw, 130px);
  }
  .controls .accel{
    right: calc(1.6vw + env(safe-area-inset-right));
    bottom: calc(1.8vh + env(safe-area-inset-bottom));
  }
  .controls .left{
    left: calc(1.6vw + env(safe-area-inset-left));
    bottom: calc(1.8vh + env(safe-area-inset-bottom));
  }
  .controls .right{
    left: calc(1.6vw + env(safe-area-inset-left));
    bottom: calc(1.8vh + env(safe-area-inset-bottom) + var(--btnSize) + var(--btnGap));
  }
}

/* Desktop: esconde */
@media (min-width:900px){
  .controls{ display:none }
}

/* ===== Dica tap-to-start (continua visível) ===== */
.tapStart{
  position:fixed; left:0; right:0; bottom:14vh; text-align:center; z-index:10;
  font-family:var(--fontGame); font-size:12px; letter-spacing:1px;
  color:#eaf2ff; text-shadow:0 2px 0 #0008;
  opacity:.85; pointer-events:none;
}
.hiddenTap{ display:none }
